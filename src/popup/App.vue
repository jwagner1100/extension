<template>
     <div>
          <div class="customnav">
               <div class="columns is-mobile">
                    <div class="logocontiner">
                         <img src="@/assets/logo.png" alt="" class="logo" />
                    </div>
                    <div class="column text">
                         <router-link class="link" to="/"> Your Trolli</router-link>
                    </div>
                    <div v-if="$route.name != 'Login'">
                         <div class="settings " @click="$router.push('/settings')">
                              <svg viewBox="0 0 40 40" fill="red" xmlns="http://www.w3.org/2000/svg">
                                   <path
                                        d="M20.0208 3.75C21.2441 3.7641 22.4626 3.90543 23.6566 4.17173C24.1779 4.28798 24.5678 4.72252 24.6269 5.25327L24.9106 7.79802C25.0389 8.96643 26.0254 9.8514 27.2016 9.85263C27.5176 9.85313 27.8304 9.7873 28.1224 9.65805L30.4569 8.6326C30.9424 8.41932 31.5096 8.5356 31.8721 8.9227C33.5591 10.7244 34.8154 12.8853 35.5466 15.2426C35.7043 15.751 35.5229 16.3034 35.0944 16.6192L33.0252 18.1443C32.4351 18.578 32.0864 19.2667 32.0864 19.9992C32.0864 20.7315 32.4351 21.4202 33.0266 21.8548L35.0976 23.3805C35.5261 23.6962 35.7078 24.2487 35.5499 24.7572C34.8191 27.1142 33.5634 29.2748 31.8774 31.0768C31.5152 31.4638 30.9484 31.5805 30.4629 31.3677L28.1191 30.3408C27.4486 30.0473 26.6784 30.0903 26.0448 30.4567C25.4111 30.8228 24.9893 31.4687 24.9088 32.1962L24.6269 34.7407C24.5689 35.2653 24.1874 35.697 23.6739 35.8192C21.2598 36.3935 18.7446 36.3935 16.3306 35.8192C15.817 35.697 15.4356 35.2653 15.3775 34.7407L15.0961 32.2C15.0135 31.4738 14.5911 30.83 13.9579 30.465C13.3247 30.1 12.5558 30.0572 11.8875 30.349L9.54312 31.376C9.05752 31.5888 8.49055 31.4722 8.12847 31.0848C6.44153 29.2808 5.18582 27.1175 4.45582 24.758C4.2986 24.2498 4.48027 23.6977 4.90857 23.3822L6.98078 21.8555C7.57102 21.4218 7.91962 20.7332 7.91962 20.0008C7.91962 19.2683 7.57102 18.5797 6.98002 18.1455L4.9091 16.6214C4.48015 16.3057 4.29832 15.753 4.4561 15.2443C5.18735 12.8869 6.44373 10.7261 8.1307 8.92437C8.49315 8.53727 9.06038 8.42098 9.5459 8.63427L11.8798 9.65953C12.5514 9.95427 13.3235 9.90975 13.9601 9.53782C14.594 9.17015 15.016 8.5237 15.0974 7.79607L15.3809 5.25327C15.4401 4.72225 15.8303 4.28757 16.3518 4.17157C17.5473 3.9057 18.7671 3.76442 20.0208 3.75ZM20.0211 6.24983C19.2644 6.25873 18.5098 6.32405 17.7636 6.44503L17.5819 8.07363C17.4123 9.58947 16.5339 10.935 15.2179 11.6984C13.8938 12.472 12.2794 12.5651 10.8748 11.9486L9.37765 11.2909C8.42442 12.4479 7.66572 13.7522 7.13137 15.1528L8.46102 16.1313C9.69237 17.036 10.4196 18.4728 10.4196 20.0008C10.4196 21.5287 9.69237 22.9655 8.46232 23.8692L7.13057 24.8503C7.66447 26.2533 8.42328 27.5602 9.37717 28.7193L10.8857 28.0585C12.2825 27.4487 13.8859 27.5378 15.2064 28.299C16.5268 29.0602 17.4078 30.4028 17.5804 31.921L17.7621 33.5608C19.2448 33.813 20.7596 33.813 22.2423 33.5608L22.4239 31.9212C22.5919 30.4035 23.4718 29.0562 24.7938 28.2922C26.1159 27.528 27.7224 27.4383 29.1217 28.0508L30.6293 28.7112C31.5823 27.5538 32.3407 26.2492 32.8749 24.8483L31.5451 23.8685C30.3137 22.9638 29.5864 21.527 29.5864 19.9992C29.5864 18.4712 30.3137 17.0343 31.5436 16.1308L32.8716 15.1518C32.3372 13.751 31.5784 12.4464 30.6251 11.2893L29.1309 11.9456C28.5221 12.215 27.8634 12.3537 27.1982 12.3526C24.7487 12.3501 22.6931 10.5059 22.4258 8.07305L22.2441 6.4445C21.5016 6.32367 20.7549 6.25853 20.0211 6.24983ZM19.9999 13.7499C23.4517 13.7499 26.2499 16.5481 26.2499 20C26.2499 23.4517 23.4517 26.25 19.9999 26.25C16.5482 26.25 13.75 23.4517 13.75 20C13.75 16.5481 16.5482 13.7499 19.9999 13.7499ZM19.9999 16.2499C17.9289 16.2499 16.25 17.9288 16.25 20C16.25 22.071 17.9289 23.75 19.9999 23.75C22.0711 23.75 23.7499 22.071 23.7499 20C23.7499 17.9288 22.0711 16.2499 19.9999 16.2499Z"
                                        fill="#212121"
                                        fill-opacity="0.66"
                                   />
                              </svg>
                         </div>
                    </div>
               </div>
          </div>
          <router-view></router-view>
     </div>
</template>

<script>
     export default {
          name: "App",
          data() {
               return {
                    token: false,
                    loggedin: false,
               };
          },
          async created() {
               // chrome.storage.sync.get(["token"], async (result) => {
               //      if (result.token) {
               //           this.$store.state.token = result.token;
               //      } else {
               //           this.$router.push("/login");
               //      }
               // });

               this.token = await this.getToken();

               if (this.token) {
                    this.$store.state.token = this.token;
                    this.loggedin = true;
               } else {
                    this.$router.push("/login");
               }
          },

          methods: {
               async getToken() {
                    return new Promise((resolve, reject) => {
                         chrome.storage.sync.get(["userToken", "userName", "userPicture", "userEmail"], (result) => {
                              if (result.userToken) {
                                   this.$store.state.userName = result.userName;
                                   this.$store.state.userPicture = result.userPicture;
                                   this.$store.state.userEmail = result.userEmail;
                                   resolve(result.userToken);
                              } else {
                                   resolve(false);
                              }
                         });
                    });
               },
          },
     };
</script>

<style lang="scss" scoped>
     .customnav {
          background: rgba(225, 225, 225, 0.18);
          border-bottom: 1px solid rgba(180, 180, 180, 0.2);
          height: 45px;
          padding: 7px 10px 7px 15px;

          .logocontiner {
               .logo {
                    width: 25px;
                    margin-top: 2.5px;
                    border-radius: 100%;
               }
          }

          .settings {
               padding: 5px;
               // margin-top: 2px;
               cursor: pointer;

               svg {
                    width: 22px;
                    height: 22px;
               }
          }
          .text,
          .link {
               color: black;
               text-align: center;
               font-weight: bolder !important;
               position: relative;
               top: 2.5px;
               font-size: 16.5px;
          }
     }
</style>
